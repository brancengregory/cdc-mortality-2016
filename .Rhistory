library(tidyverse)
###Import CDC Data and Set Var Types
VS16MORT <- read_csv("VS16MORT.csv", col_types = cols(Age_Value = col_integer(),
Race = col_integer()))
###Vector of ICD10 Alcohol Related Mortality Causes
ALC_ICD10 <- c("K70", "F10", "E244", "G312", "G621", "G721", "I426", "K292", "K852",
"K860", "R780", "X45", "X65", "Y15")
###Index of Obs with Matching Alcohol Related Mortality Causes
ALC_index <- NULL
for (i in 1:length(ALC_ICD10)) {
ALC_index <- c(ALC_index, grep(paste0("^", ALC_ICD10[i], sep = ""),
VS16MORT[,"ICD10"][[1]]))
}
ALC_index <- sort(unique(ALC_index))
rm(i)
###Aggregate various Asian races into single group
for (i in 1:nrow(VS16MORT)) {
if (VS16MORT$Race[i]>=4){
VS16MORT$Race[i] <- 4
}
}
rm(i)
###Subset of Mortalities Related to Alcohol
MORT_ALC <- VS16MORT %>%
filter(1:nrow(VS16MORT) %in% ALC_index)
###Proportion of Total Mortalities Related to Alcohol, by Race
(MORT_ALC$Race %>% table / VS16MORT$Race %>% table) %>%
barplot()
library(tidyverse)
###Import CDC Data and Set Var Types
VS16MORT <- read_csv("VS16MORT.csv", col_types = cols(Age_Value = col_integer(),
Race = col_integer()))
###Vector of ICD10 Alcohol Related Mortality Causes
ALC_ICD10 <- c("K70", "F10", "E244", "G312", "G621", "G721", "I426", "K292", "K852",
"K860", "R780", "X45", "X65", "Y15")
###Index of Obs with Matching Alcohol Related Mortality Causes
ALC_index <- NULL
for (i in 1:length(ALC_ICD10)) {
ALC_index <- c(ALC_index, grep(paste0("^", ALC_ICD10[i], sep = ""),
VS16MORT[,"ICD10"][[1]]))
}
ALC_index <- sort(unique(ALC_index))
rm(i)
###Aggregate various Asian races into single group
for (i in 1:nrow(VS16MORT)) {
if (VS16MORT$Race[i]>=4){
VS16MORT$Race[i] <- 4
}
}
rm(i)
###Subset of Mortalities Related to Alcohol
MORT_ALC <- VS16MORT %>%
filter(1:nrow(VS16MORT) %in% ALC_index)
###Proportion of Total Mortalities Related to Alcohol, by Race
(MORT_ALC$Race %>% table / VS16MORT$Race %>% table) %>%
barplot()
###Age Distribution of Mortality, All Causes
VS16MORT$Age_Value[VS16MORT$Age_Value!=999] %>%
as.numeric() %>%
density() %>%
plot(ylim=c(0, 0.04), col="Blue", main = "Distribution of Mortality Age by Direct Cause")
##List format 2006-2016
data <- list(VS16MORT = VS16MORT)
##List format 2006-2016
fileNames <- paste0("VS" + 06:16 "MORT.csv")
paste0("VS" + 06:16 "MORT.csv")
paste0("VS" + 6:16 "MORT.csv")
##List format 2006-2016
for (i in 6:16) {
files <- append(files, paste("VS", 0, i, "MORT.csv"))
}
##List format 2006-2016
files <- c()
for (i in 6:16) {
files <- append(files, paste("VS", 0, i, "MORT.csv"))
}
i
##List format 2006-2016
files <- c()
for (i in 6:16) {
files <- append(files, paste("VS", 0, i, "MORT.csv", sep = ""))
}
##List format 2006-2016
files <- c()
for (i in 6:16) {
if (i <= 9) {
files <- append(files, paste("VS", 0, i, "MORT.csv", sep = ""))
} else {
files <- append(files, paste("VS", i, "MORT.csv", sep = ""))
}
}
rm(i)
##List format 2006-2016
files <- c()
for (i in 6:16) {
if (i <= 9) {
files <- append(files, paste("VS", 0, i, "MORT.csv", sep = ""))
} else {
files <- append(files, paste("VS", i, "MORT.csv", sep = ""))
}
}
rm(i)
files
data <- list()
data <- list()
add_data <- function(x) {
data[[substr(x,1,8)]] <- read_csv(x, col_types = cols(Age_Value = col_integer(), Race = col_integer()))
}
lapply(files, add_data)
substr(files[1])
substr(files[1], 1 , 8)
data <- list()
add_data <- function(x) {
assign(data[[substr(x,1,8)]], read_csv(x, col_types =
cols(Age_Value = col_integer(),
Race = col_integer())),
envir=globalenv())
}
lapply(files, add_data)
data <- list()
add_data <- function(x) {
assign(data[[x]], read_csv(x, col_types =
cols(Age_Value = col_integer(),
Race = col_integer())),
envir=globalenv())
}
lapply(files, add_data)
name <- substr(x, 1, 8)
data <- list()
add_data <- function(x) {
name <- substr(x, 1, 8)
assign(name, read_csv(x, col_types =
cols(Age_Value = col_integer(),
Race = col_integer())),
envir=globalenv())
}
lapply(files, add_data)
rm(VS06MORT)
rm(VS07MORT)
data <- list()
add_data <- function(x) {
name <- substr(x, 1, 8)
assign(data[[name]], read_csv(x, col_types =
cols(Age_Value = col_integer(),
Race = col_integer())),
envir=globalenv())
}
lapply(files, add_data)
lapply(files, add_data)
data <- list()
add_data <- function(x) {
name <- substr(x, 1, 8)
assign(data[[name]], read_csv(x), envir=globalenv())
}
lapply(files, add_data)
data <- list()
add_data <- function(x) {
name <- substr(x, 1, 8)
assign(data$name, read_csv(x), envir=globalenv())
}
lapply(files, add_data)
data <- list()
data <- list()
for (i in 1:length(files)) {
data[[files[i]]] <- read_csv("VS16MORT.csv", col_types = cols(Age_Value = col_integer(),
Race = col_integer()))
}
rm(data)
rm(i)
data <- list()
for (i in 1:length(files)) {
name <- substr(files[i], 1, 8)
data[[]] <- read_csv("VS16MORT.csv", col_types = cols(Age_Value = col_integer(),
Race = col_integer()))
}
data <- list()
for (i in 1:length(files)) {
name <- substr(files[i], 1, 8)
data[[name]] <- read_csv("VS16MORT.csv", col_types = cols(Age_Value = col_integer(),
Race = col_integer()))
}
View(data)
data <- list()
for (i in 1:length(files)) {
name <- substr(files[i], 1, 8)
data[[name]] <- read_csv(files[i], col_types = cols(Age_Value = col_integer(),
Race = col_integer()))
}
View(data)
saveRDS(data, file="VS_MORT.rds")
